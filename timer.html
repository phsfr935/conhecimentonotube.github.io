<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Temporizador ‚Äî Oferta</title>

<style>
  :root{
    --bg:#ffffff;
    --accent:#28a745;
    --danger:#c20000;
    --card:#fff9f7;
    --text:#111;
    --muted:#666;
  }

  /* Container */
  body{ margin:0; font-family: Inter, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
  .wrap{ max-width:760px; margin:18px auto; padding:20px; box-sizing:border-box; text-align:center; }

  /* Card */
  .card{ background:linear-gradient(180deg, #fff 0%, #fff 60%); border-radius:14px; box-shadow:0 8px 28px rgba(12,20,30,0.06); padding:22px; border:1px solid #f0f0f0; }

  h1{ font-size:20px; margin:8px 0 6px; font-weight:700; }
  p.lead{ font-size:15px; color:var(--muted); margin:4px 0 18px; }

  /* Timer */
  #timer{ font-weight:800; font-size:36px; color:var(--text); letter-spacing:0.6px; display:inline-block; padding:8px 12px; border-radius:10px; background:#fff; min-width:220px; }

  /* Buttons */
  .btns{ margin-top:18px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
  .btn{
    display:inline-flex; align-items:center; justify-content:center;
    padding:12px 18px; border-radius:12px; font-weight:700; font-size:16px;
    text-decoration:none; cursor:pointer; border:0; min-width:180px;
    box-shadow:0 6px 16px rgba(40,167,69,0.14);
    transform-origin:center center;
  }
  .btn-primary{ background:var(--accent); color:#fff; }
  .btn-secondary{ background:#ffffff; color:var(--accent); border:2px solid var(--accent); box-shadow:none; }

  /* Expired state */
  .expired .btn{ display:none !important; }
  #expired-msg{ display:none; color:var(--danger); font-weight:800; margin-top:16px; }

  /* Subtle animations */
  @keyframes pulse {
    0%{ transform:scale(1); }
    50%{ transform:scale(1.04); }
    100%{ transform:scale(1); }
  }
  @keyframes shake {
    0%{ transform:translateX(0); }
    20%{ transform:translateX(-6px); }
    40%{ transform:translateX(6px); }
    60%{ transform:translateX(-6px); }
    80%{ transform:translateX(6px); }
    100%{ transform:translateX(0); }
  }

  /* states applied by JS */
  .pulse { animation: pulse 900ms ease-in-out infinite; }
  .shake { animation: shake 320ms linear infinite; }

  /* small screens */
  @media (max-width:420px){
    #timer{ font-size:28px; min-width:160px; }
    .btn{ min-width:140px; font-size:15px; padding:10px 14px; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <h1>üî• Oferta Especial ‚Äî S√≥ Hoje</h1>
      <p class="lead">Oferta por tempo limitado. Garanta agora antes que acabe.</p>

      <div id="timer" aria-live="polite" role="timer">00:00:00</div>

      <div class="btns" id="btns">
        <a id="buyBtn" class="btn btn-primary" href="https://pay.hotmart.com/S99175123R" target="_blank" rel="noopener noreferrer">
          üí∞ Quero Sair das D√≠vidas Agora
        </a>
        <a id="detailsBtn" class="btn btn-secondary" href="#mais" >
          üîç Ver detalhes
        </a>
      </div>

      <div id="expired-msg">‚õî <strong>Oferta encerrada.</strong> Tente novamente em breve.</div>
    </div>
  </div>

<script>
/*
  Temporizador premium (standalone)
  - 24 horas (TEMPO_OFERTA)
  - cooldown 3 dias (COOLDOWN)
  - armazenamento local (localStorage) para persist√™ncia
  - 'expirado_permanente' trava oferta at√© o cooldown reset
  - anima√ß√µes progressivas
*/

(function(){
  // CONFIG
  const TEMPO_OFERTA = 24 * 60 * 60 * 1000; // 24h em ms
  const COOLDOWN = 3 * 24 * 60 * 60 * 1000; // 3 dias em ms
  const KEY_INICIO = 'oferta_inicio_v1';
  const KEY_ULTIMO = 'oferta_ultimo_v1';
  const KEY_EXP = 'oferta_expirado_v1';

  // ELEMENTS
  const timerEl = document.getElementById('timer');
  const btnsEl = document.getElementById('btns');
  const expiredMsg = document.getElementById('expired-msg');
  const card = document.getElementById('card');

  // HELPERS
  const now = ()=> Date.now();
  const formatDHMS = ms => {
    if(ms <= 0) return '00:00:00';
    const s = Math.floor(ms/1000);
    const h = Math.floor(s/3600);
    const m = Math.floor((s%3600)/60);
    const sec = s%60;
    const hh = String(h).padStart(2,'0');
    const mm = String(m).padStart(2,'0');
    const ss = String(sec).padStart(2,'0');
    return `${hh}:${mm}:${ss}`;
  };

  // Load state
  let inicio = localStorage.getItem(KEY_INICIO);
  let ultimo = localStorage.getItem(KEY_ULTIMO);
  let expirado = localStorage.getItem(KEY_EXP);

  if(!inicio){
    inicio = now();
    localStorage.setItem(KEY_INICIO, String(inicio));
  }
  inicio = parseInt(inicio,10);
  ultimo = ultimo ? parseInt(ultimo,10) : now();

  // If user was away for more than cooldown -> reset
  if(now() - ultimo > COOLDOWN){
    inicio = now();
    localStorage.setItem(KEY_INICIO, String(inicio));
    localStorage.removeItem(KEY_EXP);
    expirado = null;
  }

  localStorage.setItem(KEY_ULTIMO, String(now()));

  let prazoFinal = inicio + TEMPO_OFERTA;

  // Apply expired permanent
  function applyExpiredPermanent(){
    expiredMsg.style.display = 'block';
    btnsEl.style.display = 'none';
    card.classList.add('expired');
    // lock scroll inside iframe (no effect outside)
    document.documentElement.style.overflow = 'hidden';
    localStorage.setItem(KEY_EXP, '1');
  }

  // Update UI each tick
  function tick(){
    // If flagged expired, apply immediately
    expirado = localStorage.getItem(KEY_EXP);
    if(expirado){
      applyExpiredPermanent();
      timerEl.textContent = 'ENCERRADA';
      return;
    }

    const remain = prazoFinal - now();

    if(remain <= 0){
      // expired now
      timerEl.textContent = '00:00:00';
      applyExpiredPermanent();
      return;
    }

    // Show timer
    timerEl.textContent = formatDHMS(remain);

    // Animations logic:
    // last 30s -> pulse buttons
    // last 10s -> shake timer
    // last 3s -> strong shake & pulse
    btnsEl.querySelectorAll('.btn').forEach(b=> b.classList.remove('pulse'));
    timerEl.classList.remove('shake');

    if(remain <= 3000){
      timerEl.classList.add('shake');
      btnsEl.querySelectorAll('.btn').forEach(b=> b.classList.add('pulse'));
    } else if(remain <= 10000){
      timerEl.classList.add('shake');
    } else if(remain <= 30000){
      btnsEl.querySelectorAll('.btn').forEach(b=> b.classList.add('pulse'));
    }

    // schedule next tick
    requestAnimationFrame(()=>{ setTimeout(tick, 500); });
  }

  // Init
  tick();

  // Safety: expose a function in case you want to force expire via console
  window.__oferta_force_expire = function(){
    localStorage.setItem(KEY_EXP,'1');
    tick();
  };

})();
</script>
</body>
</html>
